
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>BluePayload</title>

<!-- FontAwesome CSS for icons -->
<link
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
  rel="stylesheet"
/>

<!-- Link to external CSS -->
<link rel="stylesheet" href="styles.css" />
</head>
<body>

<!-- Social Icons Bar -->
<div class="social-bar">
  <a href="mailto:contact@bluepayload.com" title="Email"><i class="fas fa-envelope"></i></a>
  <a href="https://www.linkedin.com/company/bluepayload" target="_blank" title="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
</div>

<!-- Header: Logo + Menu -->
<header class="header-main">
  <div class="logo">
    <img src="assets/blue_payload_logo.png" alt="BluePayload Logo" />
  </div>

<div class="menu-wrapper">
    <nav class="menu" id="navMenu">
      <div class="menu-items" id="menuItems">
        <div class="menu-item" data-menu="solution">Solution</div>
        <div class="menu-item" data-menu="products">Products</div>
        <div class="menu-item" data-menu="company">Company</div>
      </div>
    
      <div class="burger" id="burger" aria-label="Toggle menu" role="button" tabindex="0">
        <div></div>
        <div></div>
        <div></div>
      </div>
    </nav>
    
    <!-- Shared submenu container -->
    <div class="shared-submenu" id="sharedSubmenu"></div>
</div>
</header>

<script>
// Toggle main menu visibility
const burger = document.getElementById('burger');
const menu = document.getElementById('menuItems');

burger.addEventListener('click', () => {
  menu.classList.toggle('active');
  const expanded = menu.classList.contains('active');
  menu.setAttribute('aria-expanded', expanded);
});

// Toggle submenu on menu item click
document.querySelectorAll('.menu-item').forEach(item => {
  item.addEventListener('click', (e) => {
    // Avoid toggling submenu when clicking links inside submenu
    if (e.target.tagName.toLowerCase() === 'a') return;

    // Toggle submenu open class
    item.classList.toggle('open');

    // Accessibility: toggle aria-hidden for submenu
    const submenu = item.querySelector('.submenu');
    if(submenu) {
      const isOpen = item.classList.contains('open');
      submenu.setAttribute('aria-hidden', !isOpen);
    }
  });
});

document.addEventListener('click', (e) => {
  const menu = document.getElementById('menuItems');
  const burger = document.getElementById('burger');
  const navMenu = document.getElementById('navMenu');

  if (menu.classList.contains('active')) {
    // If click is NOT inside navMenu (burger or menu-items), close menu
    if (!navMenu.contains(e.target)) {
      menu.classList.remove('active');
      menu.setAttribute('aria-expanded', false);
      
      // Also close all open submenus
      document.querySelectorAll('.menu-item.open').forEach(item => {
        item.classList.remove('open');
        const submenu = item.querySelector('.submenu');
        if(submenu) submenu.setAttribute('aria-hidden', true);
      });
    }
  }
});

// Optional: allow keyboard toggle with Enter or Space
document.querySelectorAll('.menu-item, #burger').forEach(el => {
  el.addEventListener('keydown', e => {
    if(e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      el.click();
    }
  });
});

  const submenuMap = {
    solution: [
      { text: "Data Analyzer Framework", href: "data-analyzer-framework.html" },
      { text: "Visualization", href: "visualization.html" },
      { text: "High Performance Analysis", href: "high-performance-analysis.html" }
    ],
    products: [
      { text: "DataAnalyzer", href: "dataanalyzer.html" }
    ],
    company: [
      { text: "About", href: "about.html" },
      { text: "Contact", href: "contact.html" }
    ]
  };

  const menuItems = document.querySelectorAll('.menu-item');
  const sharedSubmenu = document.getElementById('sharedSubmenu');

  menuItems.forEach(item => {
    item.addEventListener('click', (e) => {
      e.stopPropagation(); // prevent from triggering document click

      const key = item.getAttribute('data-menu');
      const items = submenuMap[key] || [];

      // Build submenu content
      sharedSubmenu.innerHTML = items.map(entry =>
        `<a href="${entry.href}" target="_blank">${entry.text}</a>`
      ).join('');

      sharedSubmenu.classList.add('active');
    });
  });

  // Hide submenu when clicking outside
  document.addEventListener('click', () => {
    sharedSubmenu.classList.remove('active');
  });

  // Prevent click inside submenu from closing it
  sharedSubmenu.addEventListener('click', (e) => {
    e.stopPropagation();
  });
  
</script>

<!-- Main content placeholder -->
<main>
  <h1>Welcome to BluePayload</h1>
  <p>Put your main content here.</p>
</main>

</body>
</html>
